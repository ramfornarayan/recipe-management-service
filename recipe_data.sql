-- CREATE TABLE FOR INGREDIENTS
CREATE TABLE INGREDIENTS (
    ID INT NOT NULL AUTO_INCREMENT,
    CREATED_AT DATETIME(6),
    UPDATED_AT DATETIME(6),
    NAME VARCHAR(30) NOT NULL,
    PRIMARY KEY (ID),
    UNIQUE KEY UK_INGREDIENT (INGREDIENT)
);

-- CREATE TABLE FOR RECIPES
CREATE TABLE RECIPES (
    ID INT NOT NULL AUTO_INCREMENT,
    NUMBER_OF_SERVINGS INT,
    CREATED_AT DATETIME(6),
    UPDATED_AT DATETIME(6),
    INSTRUCTIONS VARCHAR(200),
    NAME VARCHAR(30) NOT NULL,
    TYPE VARCHAR(30),
    PRIMARY KEY (ID)
);

-- CREATE JOIN TABLE FOR RECIPE_INGREDIENT RELATIONSHIP
CREATE TABLE RECIPE_INGREDIENT (
    INGREDIENT_ID INT NOT NULL,
    RECIPE_ID INT NOT NULL,
    PRIMARY KEY (INGREDIENT_ID, RECIPE_ID),
    CONSTRAINT FK_RECIPE_INGREDIENT_INGREDIENT FOREIGN KEY (INGREDIENT_ID) REFERENCES INGREDIENTS (ID),
    CONSTRAINT FK_RECIPE_INGREDIENT_RECIPE FOREIGN KEY (RECIPE_ID) REFERENCES RECIPES (ID)
);

-- =========================
-- INGREDIENTS
-- =========================
INSERT INTO INGREDIENTS (ID, CREATED_AT, UPDATED_AT, NAME) VALUES
(1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'POTATO'),
(2, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'TOMATO'),
(3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'ONION'),
(4, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'SALMON'),
(5, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'CHEESE'),
(6, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'GARLIC'),
(7, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'CHICKEN');

-- =========================
-- RECIPES
-- =========================
INSERT INTO RECIPES (ID, CREATED_AT, UPDATED_AT, NAME, TYPE, NUMBER_OF_SERVINGS, INSTRUCTIONS)
VALUES
(1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
 'VEG POTATO CURRY', 'VEGETARIAN', 4,
 'CHOP POTATOES AND ONION, COOK ON STOVE AND SERVE HOT'),

(2, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
 'CHEESE BAKED PASTA', 'VEGETARIAN', 2,
 'BOIL PASTA, ADD CHEESE AND BAKE IN OVEN'),

(3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
 'GRILLED SALMON', 'NON_VEGETARIAN', 3,
 'MARINATE SALMON AND GRILL ON PAN'),

(4, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
 'SIMPLE VEG PASTA', 'VEGETARIAN', 4,
 'BOIL PASTA, ADD VEGETABLES AND STIR FRY'),

(5, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
 'OVEN BAKED POTATOES', 'VEGETARIAN', 5,
 'SLICE POTATOES, ADD CHEESE AND BAKE IN OVEN'),

(6, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
 'GARLIC CHICKEN', 'NON_VEGETARIAN', 2,
 'MARINATE CHICKEN WITH GARLIC AND FRY'),

(7, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP,
 'TOMATO SOUP', 'VEGETARIAN', 3,
 'BOIL TOMATO AND GARLIC, BLEND AND SERVE');

-- =========================
-- RECIPE_INGREDIENT (M:N)
-- =========================

-- VEG POTATO CURRY
INSERT INTO RECIPE_INGREDIENT VALUES (1, 1);
INSERT INTO RECIPE_INGREDIENT VALUES (2, 1);
INSERT INTO RECIPE_INGREDIENT VALUES (3, 1);

-- CHEESE BAKED PASTA
INSERT INTO RECIPE_INGREDIENT VALUES (2, 2);
INSERT INTO RECIPE_INGREDIENT VALUES (5, 2);

-- GRILLED SALMON
INSERT INTO RECIPE_INGREDIENT VALUES (4, 3);

-- SIMPLE VEG PASTA
INSERT INTO RECIPE_INGREDIENT VALUES (2, 4);
INSERT INTO RECIPE_INGREDIENT VALUES (3, 4);
INSERT INTO RECIPE_INGREDIENT VALUES (5, 4);

-- OVEN BAKED POTATOES
INSERT INTO RECIPE_INGREDIENT VALUES (1, 5);
INSERT INTO RECIPE_INGREDIENT VALUES (5, 5);

-- GARLIC CHICKEN
INSERT INTO RECIPE_INGREDIENT VALUES (7, 6);
INSERT INTO RECIPE_INGREDIENT VALUES (6, 6);

-- TOMATO SOUP
INSERT INTO RECIPE_INGREDIENT VALUES (2, 7);
INSERT INTO RECIPE_INGREDIENT VALUES (6, 7);